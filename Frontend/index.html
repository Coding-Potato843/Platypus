<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Platypus - 사진 공유 및 정리 앱. 친구들과 사진을 공유하고, 그룹으로 정리하세요.">
    <title>Platypus - Photo Sharing & Organization</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <!-- Auth Page (Landing/Login Page for unauthenticated users) -->
    <div id="authPage" class="auth-page">
        <div class="auth-page-container">
            <!-- Background decoration -->
            <div class="auth-bg-decoration">
                <div class="auth-bg-circle auth-bg-circle-1"></div>
                <div class="auth-bg-circle auth-bg-circle-2"></div>
                <div class="auth-bg-circle auth-bg-circle-3"></div>
            </div>

            <!-- Left side - Branding -->
            <div class="auth-branding">
                <div class="auth-branding-content">
                    <div class="auth-logo">
                        <div class="auth-logo-icon">
                            <i class="ph-fill ph-bird"></i>
                        </div>
                        <h1 class="auth-logo-text">Platypus</h1>
                    </div>
                    <p class="auth-tagline">사진을 공유하고, 추억을 정리하세요</p>
                    <div class="auth-features">
                        <div class="auth-feature">
                            <i class="ph-fill ph-images"></i>
                            <span>사진 불러오기 및 정리</span>
                        </div>
                        <div class="auth-feature">
                            <i class="ph-fill ph-users"></i>
                            <span>친구들과 사진 공유</span>
                        </div>
                        <div class="auth-feature">
                            <i class="ph-fill ph-folders"></i>
                            <span>그룹별 앨범 관리</span>
                        </div>
                        <div class="auth-feature">
                            <i class="ph-fill ph-play-circle"></i>
                            <span>슬라이드쇼 재생</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right side - Auth Form -->
            <div class="auth-form-section">
                <div class="auth-form-card">
                    <div class="auth-form-tabs">
                        <button class="auth-form-tab active" data-auth-page-tab="login">로그인</button>
                        <button class="auth-form-tab" data-auth-page-tab="signup">회원가입</button>
                    </div>

                    <!-- Login Form -->
                    <form class="auth-page-form active" id="authPageLoginForm">
                        <div class="auth-form-group">
                            <label for="authLoginEmail">이메일</label>
                            <div class="auth-input-wrapper">
                                <i class="ph ph-envelope"></i>
                                <input type="email" id="authLoginEmail" placeholder="이메일 주소를 입력하세요" required>
                            </div>
                        </div>
                        <div class="auth-form-group">
                            <label for="authLoginPassword">비밀번호</label>
                            <div class="auth-input-wrapper">
                                <i class="ph ph-lock"></i>
                                <input type="password" id="authLoginPassword" placeholder="비밀번호를 입력하세요" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary btn-full auth-submit-btn">
                            <i class="ph ph-sign-in"></i>
                            <span>로그인</span>
                        </button>
                    </form>

                    <!-- Signup Form -->
                    <form class="auth-page-form" id="authPageSignupForm">
                        <div class="auth-form-group">
                            <label for="authSignupEmail">이메일</label>
                            <div class="auth-input-wrapper">
                                <i class="ph ph-envelope"></i>
                                <input type="email" id="authSignupEmail" placeholder="이메일 주소를 입력하세요" required>
                            </div>
                        </div>
                        <div class="auth-form-group">
                            <label for="authSignupUsername">사용자명</label>
                            <div class="auth-input-wrapper">
                                <i class="ph ph-user"></i>
                                <input type="text" id="authSignupUsername" placeholder="사용자명을 입력하세요" required>
                            </div>
                            <span class="auth-input-hint">3-20자, 한글/영문/숫자/밑줄 사용 가능 (ID는 자동 생성)</span>
                        </div>
                        <div class="auth-form-group">
                            <label for="authSignupPassword">비밀번호</label>
                            <div class="auth-input-wrapper">
                                <i class="ph ph-lock"></i>
                                <input type="password" id="authSignupPassword" placeholder="비밀번호를 입력하세요" required>
                            </div>
                            <span class="auth-input-hint">8자 이상, 숫자, 알파벳, 특수문자가 반드시 포함</span>
                        </div>
                        <div class="auth-form-group">
                            <label for="authSignupPasswordConfirm">비밀번호 확인</label>
                            <div class="auth-input-wrapper">
                                <i class="ph ph-lock"></i>
                                <input type="password" id="authSignupPasswordConfirm" placeholder="비밀번호를 다시 입력하세요" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary btn-full auth-submit-btn">
                            <i class="ph ph-user-plus"></i>
                            <span>회원가입</span>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- App Container (Hidden when not authenticated) -->
    <div id="app" class="app-container" style="display: none;">

        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="ph-fill ph-bird"></i>
                    </div>
                    <h1 class="logo-text">Platypus</h1>
                </div>
                <div class="header-actions">
                    <button class="btn btn-icon" id="searchToggle" aria-label="검색">
                        <i class="ph ph-magnifying-glass"></i>
                    </button>
                    <button class="btn btn-primary" id="syncBtn">
                        <i class="ph ph-arrows-clockwise"></i>
                        <span>사진 불러오기</span>
                    </button>
                </div>
            </div>

            <!-- Search Bar (Hidden by default) -->
            <div class="search-bar" id="searchBar">
                <div class="search-input-group">
                    <label for="locationSearch">위치</label>
                    <div class="search-input-wrapper">
                        <i class="ph ph-magnifying-glass"></i>
                        <input type="text" id="locationSearch" placeholder="위치로 검색..." class="search-input">
                    </div>
                </div>
                <div class="date-filter">
                    <div class="date-input-group">
                        <label for="startDate">시작일</label>
                        <input type="date" id="startDate" class="date-input">
                    </div>
                    <div class="date-input-group">
                        <label for="endDate">종료일</label>
                        <input type="date" id="endDate" class="date-input">
                    </div>
                </div>
                <button class="btn btn-secondary btn-clear-filters" id="clearFilters">
                    <i class="ph ph-x"></i>
                    <span>필터 초기화</span>
                </button>
            </div>
        </header>

        <!-- Tab Navigation -->
        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="my-photos">
                <i class="ph ph-image-square"></i>
                <span>내 사진</span>
            </button>
            <button class="tab-btn" data-tab="friends">
                <i class="ph ph-users"></i>
                <span>친구</span>
            </button>
            <button class="tab-btn" data-tab="account">
                <i class="ph ph-user-circle"></i>
                <span>계정</span>
                <span class="tab-badge" id="accountRequestBadge" style="display: none;"></span>
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">

            <!-- My Photos Tab -->
            <section class="tab-content active" id="my-photos">
                <!-- Group Filter -->
                <div class="group-filter-container">
                    <div class="group-filter-scroll">
                        <button class="group-chip active" data-group="all">
                            <i class="ph ph-images"></i>
                            <span>전체 사진</span>
                        </button>
                        <button class="group-chip" data-group="favorites">
                            <i class="ph ph-heart"></i>
                            <span>즐겨찾기</span>
                        </button>
                        <button class="group-chip" data-group="travel">
                            <i class="ph ph-airplane"></i>
                            <span>여행</span>
                        </button>
                        <button class="group-chip" data-group="family">
                            <i class="ph ph-house"></i>
                            <span>가족</span>
                        </button>
                        <button class="group-chip" data-group="food">
                            <i class="ph ph-fork-knife"></i>
                            <span>음식</span>
                        </button>
                    </div>
                    <button class="btn btn-icon" id="addPhotosToGroupBtn" style="display: none;" aria-label="그룹에 사진 추가">
                        <i class="ph ph-plus-circle"></i>
                    </button>
                    <button class="btn btn-icon" id="manageGroupsBtn" aria-label="그룹 관리">
                        <i class="ph ph-gear-six"></i>
                    </button>
                </div>

                <!-- Sort Options -->
                <div class="sort-container">
                    <div class="sort-label">
                        <i class="ph ph-sort-ascending"></i>
                        <span>정렬</span>
                    </div>
                    <select id="sortFieldSelect" class="sort-select">
                        <option value="date_taken">촬영 시간</option>
                        <option value="created_at">업로드 시간</option>
                    </select>
                    <select id="sortOrderSelect" class="sort-select">
                        <option value="desc">최신순</option>
                        <option value="asc">오래된순</option>
                    </select>
                </div>

                <!-- Photo Gallery -->
                <div class="gallery" id="gallery">
                    <!-- Photos will be dynamically rendered here -->
                </div>
            </section>

            <!-- Friends Tab -->
            <section class="tab-content" id="friends">
                <div class="friends-header">
                    <div class="friends-header-top">
                        <div class="friends-header-text">
                            <h2>친구 사진</h2>
                            <p class="friends-subtitle">친구들이 공유한 사진들을 확인하세요</p>
                        </div>
                        <button class="btn btn-primary" id="addFriendBtn">
                            <i class="ph ph-user-plus"></i>
                            <span>친구 추가</span>
                        </button>
                    </div>
                </div>
                <div class="gallery" id="friendsGallery">
                    <!-- Friend photos will be dynamically rendered here -->
                </div>
            </section>

            <!-- Account Tab -->
            <section class="tab-content" id="account">
                <div class="account-container">
                    <!-- User Profile Card -->
                    <div class="profile-card">
                        <div class="profile-header">
                            <div class="avatar" id="userAvatar">
                                <i class="ph-fill ph-user"></i>
                            </div>
                            <div class="profile-info">
                                <div class="profile-name-row">
                                    <span class="profile-label">사용자명</span>
                                    <h2 class="profile-name" id="userName">사용자</h2>
                                </div>
                                <div class="profile-id-row">
                                    <span class="profile-label">ID</span>
                                    <span class="profile-id" id="userId">@username</span>
                                </div>
                            </div>
                            <button class="btn btn-secondary" id="editProfileBtn">
                                <i class="ph ph-pencil-simple"></i>
                                <span>프로필 수정</span>
                            </button>
                        </div>

                        <div class="profile-details">
                            <div class="detail-item">
                                <i class="ph ph-envelope"></i>
                                <span id="userEmail">email@example.com</span>
                            </div>
                            <div class="detail-item">
                                <i class="ph ph-calendar"></i>
                                <span id="joinDate">가입일: 2024년 1월 1일</span>
                            </div>
                            <div class="detail-item">
                                <i class="ph ph-arrows-clockwise"></i>
                                <span id="lastSync">마지막 스캔: 오늘</span>
                            </div>
                        </div>

                        <div class="profile-stats">
                            <div class="stat-item">
                                <span class="stat-value" id="photoCount">0</span>
                                <span class="stat-label">사진</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="friendCount">0</span>
                                <span class="stat-label">친구</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="storageUsed">0 MB</span>
                                <span class="stat-label">저장공간</span>
                            </div>
                        </div>
                    </div>

                    <!-- Account Settings -->
                    <div class="account-settings">
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-label">친구 요청 거부</span>
                                <span class="setting-description">활성화하면 다른 사용자가 나에게 친구 요청을 보낼 수 없습니다. 직접 요청을 보내야 합니다.</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="blockFriendRequestsToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-divider"></div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-label">다운로드 잠금</span>
                                <span class="setting-description">활성화하면 친구가 내 사진을 다운로드할 수 없습니다.</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="lockPhotoDownloadsToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-divider"></div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-label">위치 정보 숨기기</span>
                                <span class="setting-description">활성화하면 친구가 내 사진의 위치 정보를 볼 수 없습니다. 내 사진 탭에서는 정상적으로 표시됩니다.</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="hideLocationToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>

                    <!-- Friend Sub-Tabs -->
                    <div class="friend-sub-tabs-container">
                        <div class="friend-sub-tab-header">
                            <nav class="friend-sub-tab-nav">
                                <button class="friend-sub-tab-btn active" data-tab="friend-list">
                                    <span>친구 목록</span>
                                </button>
                                <button class="friend-sub-tab-btn" data-tab="received-requests">
                                    <span>받은 요청</span>
                                    <span class="friend-sub-tab-badge" id="receivedRequestCount" style="display: none;"></span>
                                </button>
                                <button class="friend-sub-tab-btn" data-tab="sent-requests">
                                    <span>보낸 요청</span>
                                    <span class="friend-sub-tab-badge" id="sentRequestCount" style="display: none;"></span>
                                </button>
                            </nav>
                        </div>

                        <div class="friend-sub-tab-search">
                            <i class="ph ph-magnifying-glass"></i>
                            <input type="text" id="friendSubTabSearchInput" placeholder="이름, ID로 검색">
                        </div>

                        <div class="friend-sub-tab-content-area">
                            <div class="friend-sub-tab-content active" id="friend-list">
                                <div class="friends-list" id="friendsList">
                                    <!-- Friends will be dynamically rendered here -->
                                </div>
                            </div>

                            <div class="friend-sub-tab-content" id="received-requests">
                                <div class="request-list" id="receivedRequestsList">
                                </div>
                            </div>

                            <div class="friend-sub-tab-content" id="sent-requests">
                                <div class="request-list" id="sentRequestsList">
                                </div>
                            </div>
                        </div>

                        <div class="friend-sub-tab-action-bar" id="friendSubTabActionBar">
                            <button class="btn btn-primary btn-full" id="sendFriendRequestBtn">
                                <i class="ph ph-user-plus"></i>
                                <span>친구 요청 보내기</span>
                            </button>
                        </div>
                    </div>

                    <!-- Account Actions -->
                    <div class="account-actions">
                        <button class="btn btn-danger btn-full" id="logoutBtn">
                            <i class="ph ph-sign-out"></i>
                            <span>로그아웃</span>
                        </button>
                        <button class="btn btn-danger-outline btn-full" id="deleteAccountBtn">
                            <i class="ph ph-user-minus"></i>
                            <span>회원탈퇴</span>
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Floating Action Button for Slideshow -->
        <button class="fab" id="slideshowBtn" aria-label="슬라이드쇼 시작">
            <i class="ph-fill ph-play"></i>
        </button>

    </div>

    <!-- Photo Detail Modal -->
    <div class="modal" id="photoModal">
        <div class="modal-overlay" data-close-modal></div>
        <div class="modal-content photo-modal-content">
            <button class="modal-close" data-close-modal aria-label="닫기">
                <i class="ph ph-x"></i>
            </button>
            <div class="photo-detail">
                <div class="photo-view">
                    <img src="" alt="Photo" id="modalPhoto">
                </div>
                <div class="photo-info">
                    <div class="photo-meta">
                        <div class="meta-item">
                            <i class="ph ph-calendar"></i>
                            <span id="photoDate">날짜: ---</span>
                        </div>
                        <div class="meta-item">
                            <i class="ph ph-upload-simple"></i>
                            <span id="photoUploadDate">업로드: ---</span>
                        </div>
                        <div class="meta-item" id="photoLocationItem">
                            <i class="ph ph-map-pin"></i>
                            <span id="photoLocation">위치: ---</span>
                        </div>
                        <div class="meta-item author-item" id="photoAuthorItem" style="display: none;">
                            <i class="ph ph-user"></i>
                            <span id="photoAuthor">작성자: ---</span>
                        </div>
                    </div>

                    <div class="photo-groups-section" id="photoGroupsSection">
                        <h4>
                            <i class="ph ph-folder"></i>
                            그룹 지정
                        </h4>
                        <div class="group-toggle-list" id="groupToggleList">
                            <!-- Group toggles will be rendered here -->
                        </div>
                    </div>

                    <div class="photo-actions">
                        <button class="btn btn-secondary" id="downloadPhotoBtn">
                            <i class="ph ph-download-simple"></i>
                            <span>다운로드</span>
                        </button>
                        <button class="btn btn-danger" id="deletePhotoBtn">
                            <i class="ph ph-trash"></i>
                            <span>삭제</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sync Modal -->
    <div class="modal" id="syncModal">
        <div class="modal-overlay" data-close-modal></div>
        <div class="modal-content sync-modal-content">
            <div class="modal-header">
                <h2>
                    <i class="ph ph-arrows-clockwise"></i>
                    사진 불러오기
                </h2>
                <button class="modal-close" data-close-modal aria-label="닫기">
                    <i class="ph ph-x"></i>
                </button>
            </div>
            <div class="sync-body">
                <!-- Hidden file input -->
                <input type="file" id="photoFileInput" multiple accept="image/*" style="display: none;">

                <!-- Initial state: Select photos -->
                <div id="syncInitialState">
                    <p class="sync-description">갤러리로 불러올 사진을 선택하세요</p>
                    <button class="btn btn-primary btn-large" id="selectPhotosBtn">
                        <i class="ph ph-images"></i>
                        <span>사진 파일 선택</span>
                    </button>
                </div>

                <!-- Preview state: Show selected photos -->
                <div id="syncPreviewState" style="display: none;">
                    <p class="sync-description">
                        <span id="syncPhotoCount">0</span>장의 새 사진이 발견되었습니다
                    </p>
                    <div class="sync-actions-top">
                        <button class="btn btn-link" id="selectAllBtn">전체 선택</button>
                        <button class="btn btn-link" id="deselectAllBtn">전체 해제</button>
                        <button class="btn btn-link" id="reselectPhotosBtn">다시 선택</button>
                    </div>
                    <div class="sync-gallery" id="syncGallery">
                        <!-- Sync preview photos will be rendered here -->
                    </div>
                </div>

                <!-- Upload progress -->
                <div id="syncUploadState" style="display: none;">
                    <p class="sync-description">사진을 업로드하는 중...</p>
                    <div class="upload-progress">
                        <div class="upload-progress-bar" id="uploadProgressBar"></div>
                    </div>
                    <p class="upload-progress-text" id="uploadProgressText">0 / 0</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-close-modal>취소</button>
                <button class="btn btn-primary" id="importPhotosBtn" disabled>
                    <i class="ph ph-upload"></i>
                    <span>선택한 사진 가져오기</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Add Photos to Group Modal -->
    <div class="modal" id="addToGroupModal">
        <div class="modal-overlay" data-close-modal></div>
        <div class="modal-content add-to-group-modal-content">
            <div class="modal-header">
                <h2>
                    <i class="ph ph-plus-circle"></i>
                    <span id="addToGroupTitle">그룹에 사진 추가</span>
                </h2>
                <button class="modal-close" data-close-modal aria-label="닫기">
                    <i class="ph ph-x"></i>
                </button>
            </div>
            <div class="add-to-group-body">
                <p class="add-to-group-description">
                    <span id="addToGroupCount">0</span>장의 사진을 선택할 수 있습니다
                </p>
                <div class="add-to-group-actions-top">
                    <button class="btn btn-link" id="selectAllAddToGroupBtn">전체 선택</button>
                    <button class="btn btn-link" id="deselectAllAddToGroupBtn">전체 해제</button>
                </div>
                <div class="add-to-group-gallery" id="addToGroupGallery">
                    <!-- Photos will be rendered here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-close-modal>취소</button>
                <button class="btn btn-primary" id="confirmAddToGroupBtn" disabled>
                    <i class="ph ph-plus"></i>
                    <span>추가</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Group Management Modal -->
    <div class="modal" id="groupModal">
        <div class="modal-overlay" data-close-modal></div>
        <div class="modal-content group-modal-content">
            <div class="modal-header">
                <h2>
                    <i class="ph ph-folders"></i>
                    그룹 관리
                </h2>
                <button class="modal-close" data-close-modal aria-label="닫기">
                    <i class="ph ph-x"></i>
                </button>
            </div>
            <div class="group-body">
                <div class="new-group-form">
                    <input type="text" id="newGroupName" placeholder="새 그룹 이름" class="input">
                    <button class="btn btn-primary" id="createGroupBtn">
                        <i class="ph ph-plus"></i>
                        <span>생성</span>
                    </button>
                </div>
                <div class="group-list" id="groupList">
                    <!-- Groups will be rendered here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Slideshow Modal -->
    <div class="slideshow-modal" id="slideshowModal">
        <div class="slideshow-container">
            <img src="" alt="Slideshow Photo" id="slideshowPhoto">
            <div class="slideshow-info" id="slideshowInfo">
                <div class="slideshow-location">
                    <i class="ph ph-map-pin"></i>
                    <span id="slideshowLocation">---</span>
                </div>
                <div class="slideshow-date">
                    <i class="ph ph-calendar"></i>
                    <span id="slideshowDate">---</span>
                </div>
            </div>
        </div>

        <div class="slideshow-controls" id="slideshowControls">
            <div class="slideshow-top-controls">
                <button class="slideshow-close" id="closeSlideshowBtn" aria-label="닫기">
                    <i class="ph ph-x"></i>
                </button>
            </div>

            <div class="slideshow-nav-controls">
                <button class="slideshow-nav-btn" id="prevSlideBtn" aria-label="이전">
                    <i class="ph ph-caret-left"></i>
                </button>
                <button class="slideshow-play-btn" id="playPauseBtn" aria-label="재생/일시정지">
                    <i class="ph-fill ph-play" id="playIcon"></i>
                    <i class="ph-fill ph-pause" id="pauseIcon" style="display: none;"></i>
                </button>
                <button class="slideshow-nav-btn" id="nextSlideBtn" aria-label="다음">
                    <i class="ph ph-caret-right"></i>
                </button>
            </div>

            <div class="slideshow-bottom-controls">
                <div class="slideshow-progress">
                    <div class="progress-bar" id="slideshowProgressBar"></div>
                </div>
                <div class="slideshow-settings">
                    <select id="sortModeSelect" class="slideshow-select">
                        <option value="latest">최신순</option>
                        <option value="chronological">시간순</option>
                        <option value="random">랜덤</option>
                    </select>
                    <select id="slideshowGroupFilter" class="slideshow-select">
                        <option value="all">전체 사진</option>
                        <!-- Groups will be populated dynamically -->
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal (Login/Signup) -->
    <div class="modal" id="authModal">
        <div class="modal-overlay"></div>
        <div class="modal-content auth-modal-content">
            <div class="auth-tabs">
                <button class="auth-tab active" data-auth-tab="login">로그인</button>
                <button class="auth-tab" data-auth-tab="signup">회원가입</button>
            </div>

            <!-- Login Form -->
            <form class="auth-form active" id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">이메일</label>
                    <div class="input-wrapper">
                        <i class="ph ph-envelope"></i>
                        <input type="email" id="loginEmail" placeholder="이메일 주소" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="loginPassword">비밀번호</label>
                    <div class="input-wrapper">
                        <i class="ph ph-lock"></i>
                        <input type="password" id="loginPassword" placeholder="비밀번호" required>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary btn-full">
                    <i class="ph ph-sign-in"></i>
                    <span>로그인</span>
                </button>
            </form>

            <!-- Signup Form -->
            <form class="auth-form" id="signupForm">
                <div class="form-group">
                    <label for="signupEmail">이메일</label>
                    <div class="input-wrapper">
                        <i class="ph ph-envelope"></i>
                        <input type="email" id="signupEmail" placeholder="이메일 주소" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="signupUsername">사용자명</label>
                    <div class="input-wrapper">
                        <i class="ph ph-user"></i>
                        <input type="text" id="signupUsername" placeholder="사용자명을 입력하세요" required>
                    </div>
                    <span class="input-hint">3-20자, 한글/영문/숫자/밑줄 사용 가능 (ID는 자동 생성)</span>
                </div>
                <div class="form-group">
                    <label for="signupPassword">비밀번호</label>
                    <div class="input-wrapper">
                        <i class="ph ph-lock"></i>
                        <input type="password" id="signupPassword" placeholder="비밀번호" required>
                    </div>
                    <span class="input-hint">8자 이상, 대소문자 및 숫자 포함</span>
                </div>
                <div class="form-group">
                    <label for="signupPasswordConfirm">비밀번호 확인</label>
                    <div class="input-wrapper">
                        <i class="ph ph-lock"></i>
                        <input type="password" id="signupPasswordConfirm" placeholder="비밀번호 확인" required>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary btn-full">
                    <i class="ph ph-user-plus"></i>
                    <span>회원가입</span>
                </button>
            </form>
        </div>
    </div>

    <!-- Add Friend Modal -->
    <div class="modal" id="addFriendModal">
        <div class="modal-overlay" data-close-modal></div>
        <div class="modal-content add-friend-modal-content">
            <div class="modal-header">
                <h2>
                    <i class="ph ph-user-plus"></i>
                    친구 추가
                </h2>
                <button class="modal-close" data-close-modal aria-label="닫기">
                    <i class="ph ph-x"></i>
                </button>
            </div>
            <div class="add-friend-body">
                <div class="search-friend-form">
                    <div class="input-wrapper">
                        <i class="ph ph-magnifying-glass"></i>
                        <input type="text" id="friendSearchInput" placeholder="사용자명 또는 ID로 검색..." autocomplete="off">
                    </div>
                    <button type="button" class="btn btn-primary" id="searchFriendBtn">
                        <i class="ph ph-magnifying-glass"></i>
                        <span>검색</span>
                    </button>
                </div>
                <div class="friend-search-results" id="friendSearchResults">
                    <div class="search-results-empty">
                        <i class="ph ph-users"></i>
                        <p>사용자명 또는 ID를 입력하여 친구를 검색하세요</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Edit Modal -->
    <div class="modal" id="profileEditModal">
        <div class="modal-overlay" data-close-modal></div>
        <div class="modal-content profile-edit-modal-content">
            <div class="modal-header">
                <h2>
                    <i class="ph ph-user-circle"></i>
                    프로필 수정
                </h2>
                <button class="modal-close" data-close-modal aria-label="닫기">
                    <i class="ph ph-x"></i>
                </button>
            </div>
            <form id="profileEditForm" class="profile-edit-form">
                <div class="form-group">
                    <label for="editUsername">사용자명</label>
                    <div class="input-wrapper">
                        <i class="ph ph-user"></i>
                        <input type="text" id="editUsername" placeholder="사용자명" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="editUserId">사용자 ID</label>
                    <div class="input-wrapper input-readonly">
                        <i class="ph ph-at"></i>
                        <input type="text" id="editUserId" readonly>
                    </div>
                    <span class="input-hint">사용자 ID는 변경할 수 없습니다</span>
                </div>
                <div class="form-group avatar-edit-group">
                    <label>프로필 사진</label>
                    <div class="avatar-edit-container">
                        <div class="avatar-edit-preview" id="avatarEditPreview">
                            <i class="ph-fill ph-user"></i>
                        </div>
                        <div class="avatar-edit-actions">
                            <button type="button" class="btn btn-secondary btn-sm" id="avatarUploadBtn">
                                <i class="ph ph-upload-simple"></i>
                                <span>이미지 업로드</span>
                            </button>
                            <button type="button" class="btn btn-secondary btn-sm" id="avatarFromPhotosBtn">
                                <i class="ph ph-images"></i>
                                <span>내 사진에서 선택</span>
                            </button>
                            <button type="button" class="btn-text btn-sm" id="avatarResetBtn" style="display: none;">
                                <i class="ph ph-arrow-counter-clockwise"></i>
                                <span>기본 이미지로 변경</span>
                            </button>
                        </div>
                    </div>
                    <input type="file" id="avatarFileInput" accept="image/*" style="display: none;">
                </div>
                <div class="modal-footer profile-edit-footer">
                    <button type="button" class="btn btn-secondary" data-close-modal>취소</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="ph ph-check"></i>
                        <span>저장</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Avatar Photo Picker Modal -->
    <div class="modal" id="avatarPhotoPickerModal">
        <div class="modal-overlay" data-close-modal></div>
        <div class="modal-content avatar-picker-modal-content">
            <div class="modal-header">
                <h2>
                    <i class="ph ph-image"></i>
                    프로필 사진 선택
                </h2>
                <button class="modal-close" data-close-modal aria-label="닫기">
                    <i class="ph ph-x"></i>
                </button>
            </div>
            <div class="avatar-photo-grid" id="avatarPhotoGrid">
                <div class="empty-state">
                    <i class="ph ph-image"></i>
                    <p>사진이 없습니다</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div class="modal" id="confirmModal">
        <div class="modal-overlay" data-close-modal></div>
        <div class="modal-content confirm-modal-content">
            <div class="confirm-icon">
                <i class="ph ph-warning"></i>
            </div>
            <h3 id="confirmTitle">확인</h3>
            <p id="confirmMessage">정말로 진행하시겠습니까?</p>
            <div class="confirm-actions">
                <button class="btn btn-secondary" data-close-modal>취소</button>
                <button class="btn btn-danger" id="confirmActionBtn">확인</button>
            </div>
        </div>
    </div>

    <!-- Nickname Edit Modal -->
    <div class="modal" id="nicknameModal">
        <div class="modal-overlay" data-close-modal></div>
        <div class="modal-content nickname-modal-content">
            <div class="nickname-modal-icon">
                <i class="ph ph-pencil-simple"></i>
            </div>
            <h3 id="nicknameModalTitle">별명 설정</h3>
            <div class="nickname-input-wrapper">
                <input type="text" id="nicknameInput" placeholder="별명을 입력하세요" maxlength="20" autocomplete="off">
                <span class="nickname-char-count"><span id="nicknameCharCount">0</span>/20</span>
            </div>
            <p class="nickname-hint">빈 칸으로 두면 별명이 삭제됩니다</p>
            <ul class="nickname-info">
                <li>별명은 나만 볼 수 있습니다</li>
                <li>언제든지 수정(삭제)할 수 있습니다</li>
            </ul>
            <div class="confirm-actions">
                <button class="btn btn-secondary" data-close-modal>취소</button>
                <button class="btn btn-primary" id="nicknameSaveBtn">저장</button>
            </div>
        </div>
    </div>

    <!-- Friend List Modal (Show More) -->
    <div class="modal" id="friendListModal">
        <div class="modal-overlay" data-close-modal></div>
        <div class="modal-content friend-list-modal-content">
            <div class="modal-header">
                <h2>
                    <i class="ph ph-users" id="friendListModalIcon"></i>
                    <span id="friendListModalTitle">친구 목록</span>
                </h2>
                <button class="modal-close" data-close-modal aria-label="닫기">
                    <i class="ph ph-x"></i>
                </button>
            </div>
            <div class="friend-list-modal-body" id="friendListModalBody">
                <!-- Items will be dynamically rendered here -->
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast-container" id="toastContainer">
        <!-- Toasts will be added here dynamically -->
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <i class="ph-fill ph-circle-notch"></i>
        </div>
        <p class="loading-text">로딩 중...</p>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/main.js"></script>
</body>

</html>