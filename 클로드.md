# Platypus - 사진 공유 및 정리 앱

## 프로젝트 개요

Platypus는 사용자가 기기에서 사진을 동기화하고, 그룹으로 정리하며, 친구들과 공유할 수 있는 사진 공유 및 정리 웹 애플리케이션입니다. 현대적이고 반응형 UI와 슬라이드쇼 기능을 제공합니다.

## 기술 스택

### 프론트엔드
- **프레임워크**: React
- **스타일링**: Chakra UI
- **아이콘**: Phosphor Icons

### 백엔드 및 인프라
- **데이터베이스**: Supabase (무료 플랜)
  - PostgreSQL 데이터베이스
  - 실시간 구독 기능
  - Row Level Security (RLS)로 데이터 보호
  - 내장 인증 기능
- **서버/호스팅**: Render
  - 무료 티어 사용
  - Git에서 자동 배포
  - SSL 인증서 포함

---

## 기능

### 1. 인증 및 사용자 관리

#### 1.1 회원가입
- 이메일/비밀번호 회원가입
- 고유 ID가 있는 사용자명 선택 (@username 형식)
- 아바타 선택/업로드

#### 1.2 로그인
- 이메일/비밀번호 로그인
- 세션 유지
- 로그아웃 기능

#### 1.3 사용자 프로필 (계정 탭)
- 사용자 정보 표시: 이름, 사용자명, 이메일, 아바타
- 가입일 표시
- **마지막 동기화 시간 표시** (사진이 마지막으로 동기화된 시점)
- 통계 표시: 사진 수, 친구 수, 사용 용량
- 프로필 편집 기능

---

### 2. 사진 관리

#### 2.1 사진 동기화
- 기기에서 사진을 가져오는 동기화 버튼
- **증분 동기화**: 마지막 동기화 시점 이후에 추가/촬영된 사진만 가져옴 (모든 사진 X)
- 첫 동기화: 모든 사진 가져오기 (또는 기본 과거 날짜부터)
- 이후 동기화: 마지막 동기화 이후의 새 사진만 가져옴
- 동기화 모달에서 후보 사진 표시
- 개별 사진 선택/해제
- 선택한 사진 일괄 가져오기
- 각 동기화 후 마지막 동기화 시간 추적 및 업데이트

#### 2.2 사진 갤러리
- 그리드 레이아웃 표시 (반응형: 화면 크기에 따라 2-5열)
- 이미지 지연 로딩 (Lazy Loading)
- 오버레이가 있는 호버 효과
- 호버 시 위치 배지 표시
- 친구 사진에 작성자 배지 표시
- 그룹에 속한 사진에 그룹 표시 아이콘

#### 2.3 사진 상세 모달
- 전체 크기 이미지 보기
- 메타데이터 표시:
  - 사진 ID
  - 촬영 날짜 (포맷팅됨)
  - 위치
  - 작성자 (친구 사진의 경우)
- 상세 보기에서 그룹 할당 관리

#### 2.4 사진 데이터 모델
```typescript
interface Photo {
  id: string;
  url: string;
  date: string;        // ISO 날짜 문자열
  location: string;
  groupIds: string[];  // 그룹 ID 배열
  author?: string;     // undefined = 현재 사용자의 사진
}
```

---

### 3. 그룹 관리

#### 3.1 그룹 생성
- 새 그룹 이름 입력 필드
- 생성 버튼
- 기본 그룹: 즐겨찾기, 여행, 가족, 음식

#### 3.2 그룹 수정
- 그룹 관리 모달에서 그룹별 수정 버튼 (연필 아이콘)
- 입력 필드를 통한 인라인 편집
- 저장/취소 버튼 또는 Enter/Escape 키
- 그룹 이름 업데이트 후 모든 UI 요소 새로고침

#### 3.3 그룹 삭제
- 그룹별 삭제 버튼
- 삭제 전 확인
- 그룹 삭제 시 모든 사진에서 해당 그룹 ID 자동 제거

#### 3.4 그룹 필터링
- "모든 사진" 필터 (기본값)
- 특정 그룹으로 필터링
- 가로 스크롤의 그룹 필터 칩/버튼

#### 3.5 사진을 그룹에 할당
- 사진 상세 모달에서 그룹 토글
- 사진 선택 모달을 통한 그룹에 일괄 추가
- 할당된 그룹에 시각적 표시 (체크마크)

#### 3.6 그룹 데이터 모델
```typescript
interface Group {
  id: string;
  name: string;
}
```

---

### 4. 검색 및 필터

#### 4.1 위치 필터
- 위치 검색 텍스트 입력
- 대소문자 구분 없는 부분 일치

#### 4.2 날짜 범위 필터
- 시작 날짜 선택기
- 종료 날짜 선택기
- 날짜 범위 내 사진 필터링

#### 4.3 필터 데이터 모델
```typescript
interface SearchFilters {
  location: string;
  startDate: string;
  endDate: string;
}
```

---

### 5. 소셜 기능

#### 5.1 친구 탭
- 친구의 사진만 표시
- 친구 목록에 있는 친구로 필터링
- 각 사진에 작성자 배지 표시

#### 5.2 친구 목록 관리
- 계정 탭에서 모든 친구 보기
- 친구 삭제 기능 (확인 포함)
- 친구 아바타 (이니셜 기반), 이름, ID 표시

#### 5.3 친구 사진 통합
- 친구 탭에서 친구 사진 표시
- 친구 사진을 개인 그룹에 추가 가능
- 그룹에 할당된 친구 사진은 그룹 보기에 표시

---

### 6. 슬라이드쇼 모드

#### 6.1 재생 컨트롤
- 재생/일시정지 토글
- 이전/다음 탐색
- 키보드 단축키:
  - 왼쪽/오른쪽 화살표: 탐색
  - 스페이스바: 재생/일시정지
  - Escape: 슬라이드쇼 닫기

#### 6.2 슬라이드쇼 설정
- 정렬 모드 선택:
  - 최신순 (최신 먼저)
  - 시간순 (오래된 것 먼저)
  - 랜덤 (섞기)
- 슬라이드쇼 내 그룹 필터

#### 6.3 슬라이드쇼 UI
- 전체 화면 검은 배경
- 사진 정보 오버레이 (위치, 날짜)
- 위치를 보여주는 진행 바
- 3초 동안 활동이 없으면 컨트롤 자동 숨김
- 3초 자동 전환 간격

#### 6.4 정렬 모드 Enum
```typescript
enum SortMode {
  LATEST = 'Latest',
  CHRONOLOGICAL = 'Chronological',
  RANDOM = 'Random'
}
```

---

### 7. UI/UX 기능

#### 7.1 탭 네비게이션
- 세 가지 메인 탭:
  - 내 사진 (개인)
  - 친구
  - 계정
- 활성 탭 표시기
- 탭 변경 시 그룹 필터 초기화

#### 7.2 반응형 디자인
- 모바일 우선 접근 방식
- 적응형 그리드 열
- 슬라이드쇼용 모바일 플로팅 액션 버튼
- 접을 수 있는 그룹 관리 패널

#### 7.3 시각적 피드백
- 동기화 시 로딩 스피너
- 사진 호버 효과
- 부드러운 전환 및 애니메이션
- 모달의 백드롭 블러

#### 7.4 테마
- **어두운 테마만** (기본값)
- 색상 팔레트: 시안 기본색 (#06b6d4), 텍스트용 슬레이트 그레이
- 어두운 슬레이트 배경 (#0f172a, #1e293b)
- 깊이감을 위한 미묘한 글로우 효과와 테두리

---

## 데이터베이스 스키마 (Supabase)

### 테이블

#### users (사용자)
| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid | 기본 키 |
| email | text | 사용자 이메일 |
| username | text | 표시 이름 |
| user_id | text | 고유 @핸들 |
| avatar_url | text | 프로필 이미지 URL |
| created_at | timestamp | 가입일 |
| last_sync_at | timestamp | 마지막 사진 동기화 시간 |

#### photos (사진)
| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid | 기본 키 |
| user_id | uuid | users 외래 키 |
| url | text | 사진 URL/경로 |
| date_taken | timestamp | 촬영 시간 |
| location | text | 위치 메타데이터 |
| created_at | timestamp | 업로드 타임스탬프 |

#### groups (그룹)
| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid | 기본 키 |
| user_id | uuid | users 외래 키 |
| name | text | 그룹 이름 |
| created_at | timestamp | 생성 타임스탬프 |

#### photo_groups (연결 테이블)
| 컬럼 | 타입 | 설명 |
|------|------|------|
| photo_id | uuid | photos 외래 키 |
| group_id | uuid | groups 외래 키 |

#### friendships (친구 관계)
| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | uuid | 기본 키 |
| user_id | uuid | 사용자 |
| friend_id | uuid | 친구 |
| created_at | timestamp | 친구 관계 생성 시간 |

---

## API 엔드포인트 (Render 백엔드)

### 인증
- `POST /auth/register` - 새 사용자 등록
- `POST /auth/login` - 사용자 로그인
- `POST /auth/logout` - 사용자 로그아웃

### 사진
- `GET /photos` - 사용자의 사진 가져오기
- `POST /photos` - 새 사진 업로드
- `GET /photos/:id` - 단일 사진 가져오기
- `DELETE /photos/:id` - 사진 삭제
- `PUT /photos/:id/groups` - 사진의 그룹 업데이트

### 그룹
- `GET /groups` - 사용자의 그룹 가져오기
- `POST /groups` - 새 그룹 생성
- `PUT /groups/:id` - 그룹 이름 수정
- `DELETE /groups/:id` - 그룹 삭제

### 친구
- `GET /friends` - 사용자의 친구 가져오기
- `GET /friends/photos` - 친구들의 사진 가져오기
- `POST /friends/:userId` - 친구 추가
- `DELETE /friends/:userId` - 친구 삭제

### 사용자
- `GET /user/profile` - 현재 사용자 프로필 가져오기
- `PUT /user/profile` - 프로필 업데이트

---

## 파일 구조

```
Project_02_Platypus/
├── Frontend/
│   ├── index.html
│   ├── css/
│   │   └── styles.css
│   └── js/
│       ├── main.js
│       ├── components/
│       │   ├── gallery.js
│       │   ├── slideshow.js
│       │   ├── modals.js
│       │   └── tabs.js
│       └── services/
│           ├── api.js
│           └── auth.js
├── Backend/
│   ├── server.js
│   ├── routes/
│   ├── controllers/
│   └── middleware/
├── CLAUDE.md
├── 클로드.md
└── todo list.txt
```

---

## 환경 변수

### 프론트엔드
```
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_supabase_anon_key
API_BASE_URL=your_render_api_url
```

### 백엔드 (Render)
```
DATABASE_URL=your_supabase_connection_string
JWT_SECRET=your_jwt_secret
SUPABASE_URL=your_supabase_url
SUPABASE_SERVICE_KEY=your_supabase_service_key
```

---

## 참고 사항

- `Google_AI_Studio/`의 참조 구현은 목업 데이터를 사용함 - 실제 구현은 Supabase에 연결해야 함
- 사진 저장소는 Supabase Storage 또는 Cloudinary 같은 외부 서비스 사용 가능
- 대용량 사진 라이브러리를 위한 페이지네이션 구현 고려
- 친구 사진 공유는 Supabase RLS를 통한 적절한 개인정보 보호 제어 필요
