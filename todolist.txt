# 사진 동기화 기능 구현 TODO

## 기능 요구사항
- 모바일에서 "동기화" 버튼 클릭 → 갤러리 접근
- "마지막 동기화 날짜" 이후 사진만 자동 필터링
- 기본: 모든 사진 선택됨 (원치 않는 것만 해제)
- EXIF에서 촬영 날짜/위치 추출 필수

## 버그 수정
- [x] 동기화 시점이 갱신되지 않는 문제 → updateLastSync() 호출 추가
- [x] 새로고침하면 이미지가 사라지는 문제 → Supabase DB에 실제 저장

## 구현 항목

### 1. HTML 수정 (index.html)
- [x] syncModal에 파일 입력 추가 (<input type="file" multiple accept="image/*">)
- [x] 업로드 진행률 표시 요소 추가

### 2. EXIF 메타데이터 추출
- [x] EXIF 파싱 함수 구현 (날짜, GPS 좌표) → js/utils/exif.js
- [x] GPS 좌표 → 지역명 변환 (역지오코딩) → OpenStreetMap Nominatim API

### 3. JavaScript 수정 (main.js)
- [x] 파일 선택 시 "마지막 동기화 날짜" 이후 사진만 필터링
- [x] 선택한 파일 미리보기 렌더링 (기본 전체 선택)
- [x] importSelectedPhotos() → 실제 uploadPhotos() 연결
- [x] 업로드 완료 후 updateLastSync() 호출
- [x] 업로드 완료 후 갤러리 새로고침
- [x] 역지오코딩 백그라운드 처리 (processReverseGeocoding)

### 4. 추가 고려사항
- [ ] 파일 크기 제한 (50MB) - Supabase Storage 기본 제한 있음
- [ ] 중복 업로드 방지 - 추후 구현 가능

## 브라우저 제한 사항
웹 브라우저는 보안상 사용자가 직접 파일을 선택하지 않는 한 갤러리에 자동 접근할 수 없음.
이는 모든 브라우저에 적용되는 보안 정책으로, 네이티브 앱만 갤러리 자동 스캔 가능.
